"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7826],{7227:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});a(96540);var r=a(34164);const n={tabItem:"tabItem_Ymn6"};var o=a(74848);function s({children:e,hidden:t,className:a}){return(0,o.jsx)("div",{role:"tabpanel",className:(0,r.A)(n.tabItem,a),hidden:t,children:e})}},7608:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>d,default:()=>m,frontMatter:()=>l,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"open_datasets/ego-exo4d/ego-exo4d_data_format","title":"Ego-Exo4D Data Format and Loader","description":"Ego-Exo4D includes Project Aria\'s SLAM (Trajectory and Semi-Dense Point Cloud), and Eye Gaze MPS outputs. For information about these, go to MPS data formats. This dataset also contains 3D calibration for the multiple static external cameras (GoPros).","source":"@site/docs/open_datasets/ego-exo4d/ego-exo4d_data_format.mdx","sourceDirName":"open_datasets/ego-exo4d","slug":"/open_datasets/ego-exo4d/ego-exo4d_data_format","permalink":"/projectaria_tools/docs/open_datasets/ego-exo4d/ego-exo4d_data_format","draft":false,"unlisted":false,"editUrl":"https://github.com/facebookresearch/projectaria_tools/tree/main/website/docs/open_datasets/ego-exo4d/ego-exo4d_data_format.mdx","tags":[],"version":"current","sidebarPosition":20,"frontMatter":{"sidebar_position":20,"title":"Ego-Exo4D Data Format and Loader"},"sidebar":"tutorialSidebar","previous":{"title":"Ego-Exo4D Dataset","permalink":"/projectaria_tools/docs/open_datasets/ego-exo4d/"},"next":{"title":"Digital Twin Catalog Dataset","permalink":"/projectaria_tools/docs/open_datasets/digital_twin_catalog/"}}');var n=a(74848),o=a(28453),s=a(49489),i=a(7227);const l={sidebar_position:20,title:"Ego-Exo4D Data Format and Loader"},d="Ego-Exo4D Data Format and Loader",c={},u=[{value:"3D Static camera calibration",id:"3d-static-camera-calibration",level:2},{value:"Data Format",id:"data-format",level:3},{value:"Load 3D Static Calibration data",id:"load-3d-static-calibration-data",level:3}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"ego-exo4d-data-format-and-loader",children:"Ego-Exo4D Data Format and Loader"})}),"\n",(0,n.jsxs)(t.p,{children:["Ego-Exo4D includes Project Aria's SLAM (Trajectory and Semi-Dense Point Cloud), and Eye Gaze MPS outputs. For information about these, go to ",(0,n.jsx)(t.a,{href:"/projectaria_tools/docs/data_formats/mps/mps_summary",children:"MPS data formats"}),". This dataset also contains 3D calibration for the multiple static external cameras (GoPros)."]}),"\n",(0,n.jsxs)(t.p,{children:["Go to the ",(0,n.jsx)(t.a,{href:"https://github.com/facebookresearch/Ego4d/blob/main/notebooks/egoexo/EgoExo_Aria_Data_Tutorial.ipynb",children:"Aria Ego-Exo4D Examples Notebook"})," for code snippets to load and use this data."]}),"\n",(0,n.jsx)(t.h2,{id:"3d-static-camera-calibration",children:"3D Static camera calibration"}),"\n",(0,n.jsx)(t.h3,{id:"data-format",children:"Data Format"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Column"}),(0,n.jsx)(t.th,{children:"Type"}),(0,n.jsx)(t.th,{children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"cam_uid"})}),(0,n.jsx)(t.td,{children:"string"}),(0,n.jsx)(t.td,{children:"Unique identifier of camera"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"graph_uid"})}),(0,n.jsx)(t.td,{children:"string"}),(0,n.jsx)(t.td,{children:"Unique identifier of the world coordinate frame"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"{tx,ty,tz,qx,qy,qz,qw}_world_cam"})}),(0,n.jsx)(t.td,{children:"float"}),(0,n.jsx)(t.td,{children:"Pose of the camera coordinate frame in world frame T_world_cam, translation (tx, ty, tz) in meters and rotation quaternion (qx, qy, qz, qw)"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"image_width"})}),(0,n.jsx)(t.td,{children:"int"}),(0,n.jsx)(t.td,{children:"Image size in pixels"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"image_height"})}),(0,n.jsx)(t.td,{children:"int"}),(0,n.jsx)(t.td,{children:"Image size in pixels"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"intrinsics_type"})}),(0,n.jsx)(t.td,{children:"string"}),(0,n.jsxs)(t.td,{children:["Camera intrinsics calibration type. Currently support types: ",(0,n.jsx)(t.code,{children:"KANNALABRANDTK3"}),": ",(0,n.jsx)(t.a,{href:"/projectaria_tools/docs/tech_insights/camera_intrinsic_models#the-kannalabrandtk3-kb3-model",children:"KB3 model"})]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"intrinsics_{0-7}"})}),(0,n.jsx)(t.td,{children:"float"}),(0,n.jsx)(t.td,{children:"Camera intrinsics parameters"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"start_frame_idx"})}),(0,n.jsx)(t.td,{children:"int"}),(0,n.jsxs)(t.td,{children:["Used to determine if start frame number of the video is stationary, and if stationary camera pose and intrinsic calibration results can be applied. ",(0,n.jsx)(t.code,{children:"start_frame_idx"})," and ",(0,n.jsx)(t.code,{children:"end_frame_idx"})," will both be -1 if the stationary pose and intrinsic calibration can be applied to the whole video"]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"end_frame_idx"})}),(0,n.jsx)(t.td,{children:"int"}),(0,n.jsxs)(t.td,{children:["Used to determine if the end frame number of the video is stationary and if stationary camera pose and intrinsic calibration results can be applied. ",(0,n.jsx)(t.code,{children:"start_frame_idx"})," and ",(0,n.jsx)(t.code,{children:"end_frame_idx"})," will both be -1 if the stationary pose and intrinsic calibration can be applied to the whole video"]})]})]})]}),"\n",(0,n.jsx)(t.h3,{id:"load-3d-static-calibration-data",children:"Load 3D Static Calibration data"}),"\n",(0,n.jsxs)(t.p,{children:["Data loaders for MPS outputs are provided as part of Project Aria Tools (",(0,n.jsx)(t.a,{href:"https://github.com/facebookresearch/projectaria_tools/blob/main/core/mps",children:"projectaria_tools/main/core/mps"}),"). As part of this, the loaders put the outputs into data structures that are easier for other tools to consume."]}),"\n",(0,n.jsx)(t.p,{children:"Ego-Exo4d data is unique in that it has recordings from static cameras as well as moving Project Aria glasses. The following commands enable you to load poses and intrinsic calibration of set stationary cameras (GoPros) alongside Project Aria data."}),"\n",(0,n.jsxs)(s.default,{groupId:"programming-language",children:[(0,n.jsx)(i.default,{value:"python",label:"Python",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-python",children:'import projectaria_tools.core.mps as mps\n\nstatic_cameras_path = "/path/to/mps/output/trajectory/static_cam_calibs.csv"\nstatic_cameras = mps.read_static_camera_calibrations(static_cameras_path)\n'})})}),(0,n.jsx)(i.default,{value:"cpp",label:"C++",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-cpp",children:'#include <StaticCameraCalibrationReader.h>\nusing namespace projectaria::tools::mps;\n\nstd::string staticCamerasPath = "/path/to/mps/output/trajectory/static_cam_calibs.csv";\nStaticCameraCalibrations staticCameras = readStaticCameraCalibrations(staticCamerasPath);\n'})})})]})]})}function m(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},28453:(e,t,a)=>{a.d(t,{R:()=>s,x:()=>i});var r=a(96540);const n={},o=r.createContext(n);function s(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),r.createElement(o.Provider,{value:t},e.children)}},49489:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var r=a(96540),n=a(34164),o=a(24245),s=a(56347),i=a(36494),l=a(62814),d=a(45167),c=a(69900);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:t,children:a}=e;return(0,r.useMemo)((()=>{const e=t??function(e){return u(e).map((({props:{value:e,label:t,attributes:a,default:r}})=>({value:e,label:t,attributes:a,default:r})))}(a);return function(e){const t=(0,d.XI)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function m({value:e,tabValues:t}){return t.some((t=>t.value===e))}function p({queryString:e=!1,groupId:t}){const a=(0,s.W6)(),n=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,l.aZ)(n),(0,r.useCallback)((e=>{if(!n)return;const t=new URLSearchParams(a.location.search);t.set(n,e),a.replace({...a.location,search:t.toString()})}),[n,a])]}function x(e){const{defaultValue:t,queryString:a=!1,groupId:n}=e,o=h(e),[s,l]=(0,r.useState)((()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const a=t.find((e=>e.default))??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:o}))),[d,u]=p({queryString:a,groupId:n}),[x,f]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[a,n]=(0,c.Dv)(t);return[a,(0,r.useCallback)((e=>{t&&n.set(e)}),[t,n])]}({groupId:n}),b=(()=>{const e=d??x;return m({value:e,tabValues:o})?e:null})();(0,i.A)((()=>{b&&l(b)}),[b]);return{selectedValue:s,selectValue:(0,r.useCallback)((e=>{if(!m({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),f(e)}),[u,f,o]),tabValues:o}}var f=a(11062);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=a(74848);function g({className:e,block:t,selectedValue:a,selectValue:r,tabValues:s}){const i=[],{blockElementScrollPositionUntilNextRender:l}=(0,o.a_)(),d=e=>{const t=e.currentTarget,n=i.indexOf(t),o=s[n].value;o!==a&&(l(t),r(o))},c=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const a=i.indexOf(e.currentTarget)+1;t=i[a]??i[0];break}case"ArrowLeft":{const a=i.indexOf(e.currentTarget)-1;t=i[a]??i[i.length-1];break}}t?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,n.A)("tabs",{"tabs--block":t},e),children:s.map((({value:e,label:t,attributes:r})=>(0,j.jsx)("li",{role:"tab",tabIndex:a===e?0:-1,"aria-selected":a===e,ref:e=>{i.push(e)},onKeyDown:c,onClick:d,...r,className:(0,n.A)("tabs__item",b.tabItem,r?.className,{"tabs__item--active":a===e}),children:t??e},e)))})}function _({lazy:e,children:t,selectedValue:a}){const o=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=o.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:(0,n.A)("margin-top--md",e.props.className)}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:o.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a})))})}function v(e){const t=x(e);return(0,j.jsxs)("div",{className:(0,n.A)("tabs-container",b.tabList),children:[(0,j.jsx)(g,{...t,...e}),(0,j.jsx)(_,{...t,...e})]})}function y(e){const t=(0,f.default)();return(0,j.jsx)(v,{...e,children:u(e.children)},String(t))}}}]);